{"version":3,"file":"app.3747c871d6635394e677.js","mappings":"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","sources":["webpack://chess/./src/app/connection/config.js","webpack://chess/webpack/bootstrap","webpack://chess/webpack/runtime/define property getters","webpack://chess/webpack/runtime/hasOwnProperty shorthand","webpack://chess/webpack/runtime/make namespace object","webpack://chess/./src/app/service/index.js","webpack://chess/./src/base/Component/index.js","webpack://chess/./src/common/Header/index.js","webpack://chess/./src/common/Button/index.js","webpack://chess/./src/common/Input/index.js","webpack://chess/./src/common/Input/style.module.css?18cc","webpack://chess/./src/app/router/index.js","webpack://chess/./src/app/connection/index.js","webpack://chess/./src/modules/Menu/index.js","webpack://chess/./src/modules/Menu/style.module.css?3c5c","webpack://chess/./src/pages/game.js","webpack://chess/./src/index.js","webpack://chess/./src/pages/home.js","webpack://chess/./src/pages/alice.js","webpack://chess/./src/pages/bob.js","webpack://chess/./src/pages/connect.js"],"sourcesContent":["export const peerConfiguration = {\n  iceServers: [\n    // Google STUN серверы\n    { urls: 'stun:stun.l.google.com:19302' },\n    { urls: 'stun:stun1.l.google.com:19302' },\n    { urls: 'stun:stun2.l.google.com:19302' },\n    { urls: 'stun:stun3.l.google.com:19302' },\n    { urls: 'stun:stun4.l.google.com:19302' },\n    // Twilio STUN сервер\n    { urls: 'stun:global.stun.twilio.com:3478' },\n    // Mozilla STUN сервер (неофициальный)\n    { urls: 'stun:stun.services.mozilla.com' },\n    // Nextcloud STUN сервер\n    { urls: 'stun:stun.nextcloud.com:443' },\n    // Nummertje STUN сервер\n    { urls: 'stun:numb.viagenie.ca' },\n    // VoIP STUN серверы\n    { urls: 'stun:stun.voip.blackberry.com:3478' },\n    { urls: 'stun:stun.voipbuster.com' },\n    { urls: 'stun:stun.voxgratia.org' },\n    { urls: 'stun:freestun.net:3479' },\n  ],\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const PUBLIC_SW_PATH = './sw.js';\n\nexport const makeServiceWorkers = async () => {\n  if (navigator.serviceWorker) {\n    try {\n      const response = await navigator.serviceWorker.register(PUBLIC_SW_PATH);\n      console.log('SW register success', response);\n    } catch (error) {\n      console.error('SW register failed:', error);\n    }\n  }\n};\n","export default class {\n  constructor(tagName, attributes = {}) {\n    this._element = document.createElement(tagName);\n    for (const [key, value] of Object.entries(attributes)) {\n      this._element.setAttribute(key, value);\n    }\n  }\n\n  get element() {\n    return this._element;\n  }\n\n  subscribe(store, callback) {\n    store.subscribe(callback);\n    callback();\n  }\n}\n","import { Component } from '@/base';\nimport './style.scss';\n\nexport default class extends Component {\n  constructor(text) {\n    super('div');\n    this._element.innerText = text;\n    this._element.classList.add('header');\n  }\n\n  updateText(text) {\n    this._element.innerText = text;\n  }\n}\n","import './style.css';\nimport { Component } from '@/base';\n\nexport default class extends Component {\n  constructor(text, onClick) {\n    super('button');\n    this._element.innerText = text;\n    this._element.classList.add('button');\n    this._element.onclick = onClick;\n  }\n}\n","import { Component } from '@/base';\nimport style from './style.module.css';\n\nexport default class extends Component {\n  constructor() {\n    super('input');\n    this._element.classList.add(style.input);\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"input\":\"X6UxfUUG\"};","class Router {\n  constructor(pageId = 'page', isHashRouter = true) {\n    !isHashRouter && console.log('url routing is not available now');\n    this.pageId = pageId;\n\n    window.addEventListener('hashchange', (event) => {\n      this._resolve();\n    });\n\n    window.addEventListener('DOMContentLoaded', () => {\n      this._resolve();\n    });\n  }\n\n  initRoutes(routes) {\n    this._routes = routes;\n  }\n\n  initPageContainer(element) {\n    this._pageContainer = element;\n    this._pageContainer.id = 'page-container';\n  }\n\n  _activeClassResolver(eventType, callback) {\n    window.addEventListener(eventType, () => {\n      if (location.hash === '') {\n        callback('#');\n      } else {\n        callback(location.hash);\n      }\n    });\n  }\n\n  updateActiveClass(callback) {\n    this._activeClassResolver('hashchange', callback);\n    this._activeClassResolver('DOMContentLoaded', callback);\n  }\n\n  navigate(url) {\n    location.hash = url;\n  }\n\n  isActive(url) {\n    if (!location.hash && url === '#') {\n      return true;\n    }\n    if (location.hash === url) {\n      return true;\n    }\n    return false;\n  }\n\n  _updatePage(element) {\n    this._pageContainer.innerHTML = '';\n    this._pageContainer.appendChild(element);\n  }\n\n  _resolve() {\n    if (location.hash === '') {\n      const getHomePage = this._routes['/'];\n      if (getHomePage) {\n        this._updatePage(getHomePage());\n      }\n      return;\n    }\n\n    const getNewPage = this._routes[location.hash.replace('#', '/')];\n    if (getNewPage) {\n      this._updatePage(getNewPage());\n    } else {\n      this._pageContainer.innerHTML = '404 | Not Found';\n    }\n  }\n}\n\nexport default new Router();\n","const { peerConfiguration } = require('./config');\n\nclass WebRTCConnection {\n  constructor() {}\n\n  async initConnection() {\n    const response = await fetch(\n      'https://few-clicks-test.metered.live/api/v1/turn/credentials?apiKey=2a578010173d82ed3be53773643c71c3804b'\n    );\n\n    // Saving the response in the iceServers array\n    const iceServers = await response.json();\n\n    // Using the iceServers array in the RTCPeerConnection method\n    this.peer = new RTCPeerConnection({\n      iceServers: iceServers,\n    });\n\n    this.peer.onconnectionstatechange = (event) => {\n      console.log('state changed:', this.peer.iceConnectionState, event);\n    };\n    this.peer.onicecandidateerror = (event) => {\n      console.log('ice error', event);\n    };\n  }\n\n  initLogger(logContainer) {\n    const addMessage = (message, status) => {\n      const log = document.createElement('div');\n      log.style.paddingBottom = '5px';\n      switch (status) {\n        case 'ok':\n          if (message) {\n            log.style.color = 'green';\n          }\n          break;\n        case 'error':\n          log.style.color = 'red';\n          break;\n        case 'state':\n          log.style.color = 'orange';\n          break;\n        default:\n          break;\n      }\n      log.innerText = message;\n      logContainer.prepend(log);\n    };\n    this.peer.onconnectionstatechange = (event) => {\n      const message = `[state changed]: ${this.peer.iceConnectionState}`;\n      addMessage(message, 'state');\n    };\n    this.peer.onicecandidateerror = (event) => {\n      addMessage(event.type, 'error');\n    };\n    this.peer.onicecandidate = (event) => {\n      const message = event.candidate?.candidate;\n      addMessage(message, 'ok');\n    };\n  }\n\n  getLocalDescription() {\n    return JSON.stringify(this.peer.localDescription);\n  }\n\n  onIceCandidate(callback) {\n    this.peer.addEventListener('icecandidate', () => {\n      console.log('Новый ICE кандидат: ', event.candidate);\n      callback();\n    });\n  }\n\n  setRemoteDescription(rowData) {\n    this.peer.setRemoteDescription(JSON.parse(rowData));\n  }\n\n  async createOffer() {\n    const offer = await this.peer.createOffer();\n    this.peer.setLocalDescription(offer);\n  }\n\n  async createAnswer() {\n    const answer = await this.peer.createAnswer();\n    this.peer.setLocalDescription(answer);\n  }\n\n  onOpen(role, callback) {\n    switch (role) {\n      case 'alice':\n        this.peer.ondatachannel = (event) => {\n          console.log('on data channel', event);\n          this.dataChannel = event.channel;\n          this.dataChannel.onopen = callback;\n        };\n        break;\n      case 'bob':\n        this.dataChannel = this.peer.createDataChannel('channel-name');\n        this.dataChannel.onopen = callback;\n        break;\n      default:\n        console.error('unknown role');\n        break;\n    }\n  }\n}\n\nexport const connection = new WebRTCConnection();\n","import { Component } from '@/base';\nimport { Header } from '@/common';\nimport style from './style.module.css';\n\nexport default (headerText, buttons = []) => {\n  const element = new Component('div').element;\n  element.classList.add(style.menu);\n\n  const header = new Header(headerText);\n\n  element.appendChild(header.element);\n  buttons.forEach((button) => element.appendChild(button));\n\n  return element;\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"menu\":\"j2362cLf\"};","import { connection } from '../app/connection';\nimport { Button, Input } from '../common';\n\nconst getMessageElement = (text) => {\n  const message = document.createElement('div');\n  message.innerText = `[${new Date().toUTCString().split(' ')[4]}]: ${text}`;\n  message.style.fontSize = '24px';\n\n  return message;\n};\n\nexport default () => {\n  const page = document.createElement('div');\n  const form = document.createElement('form');\n  form.onsubmit = (event) => event.preventDefault();\n\n  const chatContainer = document.createElement('div');\n  if (connection.dataChannel) {\n    connection.dataChannel.onmessage = (event) => {\n      const message = getMessageElement(event.data);\n      message.style.color = 'grey';\n      chatContainer.prepend(message);\n    };\n  }\n  const input = new Input().element;\n  const sendButton = new Button('Send', () => {\n    if (input.value) {\n      const message = getMessageElement(input.value);\n      chatContainer.prepend(message);\n      if (connection.dataChannel) {\n        connection.dataChannel.send(input.value);\n      }\n      input.value = '';\n    }\n  }).element;\n\n  form.appendChild(input);\n  form.appendChild(sendButton);\n  page.appendChild(form);\n  page.appendChild(chatContainer);\n  return page;\n};\n","import './app/styles/normalize.css';\nimport { makeServiceWorkers } from './app/service';\nimport {\n  getAlicePage,\n  getBobPage,\n  getConnectPage,\n  getGamePage,\n  getHomePage,\n} from './pages';\nimport router from './app/router';\n\nwindow.addEventListener('load', () => {\n  makeServiceWorkers();\n});\n\nconst rootElement = document.getElementById('root');\n\nrouter.initPageContainer(rootElement);\nrouter.initRoutes({\n  '/': getHomePage,\n  '/alice': getAlicePage,\n  '/bob': getBobPage,\n  '/connect': getConnectPage,\n  '/game': getGamePage,\n});\n","import router from '../app/router';\nimport { getMenuModule } from '../modules';\nimport { Button } from '@/common';\n\nexport default () => {\n  const page = document.createElement('div');\n\n  const connectButton = new Button('p2p', () => {\n    router.navigate('connect');\n  }).element;\n  const offlineButton = new Button('offline').element;\n  offlineButton.disabled = true;\n\n  const menuButtons = [connectButton, offlineButton];\n\n  page.appendChild(getMenuModule('Menu', menuButtons));\n\n  return page;\n};\n","import { Button } from '@/common';\nimport router from '../app/router';\nimport { connection } from '../app/connection';\n\nconst getStatusElement = () => {\n  const status = document.createElement('div');\n  status.style.padding = '8px';\n  status.style.fontSize = '22px';\n\n  status.innerText = 'Статус: ожидаем offer';\n\n  return status;\n};\n\nexport default () => {\n  const page = document.createElement('div');\n  const statusElement = getStatusElement();\n  const logContainer = document.createElement('div');\n\n  connection.initConnection().then(() => {\n    console.log('init alice');\n    connection.initLogger(logContainer);\n    connection.onIceCandidate = () => {\n      statusElement.innerText = 'Статус: создан answer';\n    };\n  });\n\n  const pasteButton = new Button('Paste', () => {\n    navigator.clipboard\n      .readText()\n      .then((text) => {\n        console.log('paste');\n        connection.onIceCandidate(\n          () => (statusElement.innerText = 'Статус: создан answer')\n        );\n        connection.setRemoteDescription(text);\n        connection.onOpen('alice', () => {\n          router.navigate('game');\n        });\n        connection.createAnswer();\n      })\n      .catch(console.error);\n  }).element;\n\n  const copyOffer = new Button('Copy', () => {\n    const offer = connection.getLocalDescription();\n    if (offer) {\n      navigator.clipboard\n        .writeText(offer)\n        .then(() => {\n          statusElement.innerText = 'Статус: скопировано, ждем открытия канала';\n        })\n        .catch(console.error);\n    }\n  }).element;\n\n  page.appendChild(statusElement);\n  page.appendChild(pasteButton);\n  page.appendChild(copyOffer);\n  page.appendChild(logContainer);\n\n  return page;\n};\n","import { Button } from '@/common';\nimport router from '../app/router';\nimport { connection } from '../app/connection';\n\nconst initConnection = (statusElement) => {};\n\nconst getStatusElement = () => {\n  const status = document.createElement('div');\n  status.style.padding = '8px';\n  status.style.fontSize = '22px';\n\n  status.innerText = 'Статус:';\n\n  return status;\n};\n\nexport default () => {\n  const page = document.createElement('div');\n  const statusElement = getStatusElement();\n  const logContainer = document.createElement('div');\n\n  connection.initConnection().then(() => {\n    connection.onOpen('bob', () => {\n      router.navigate('game');\n    });\n    connection.onIceCandidate(() => {\n      statusElement.innerText = 'Статус: создан offer';\n    });\n    connection.initLogger(logContainer);\n    connection.createOffer();\n  });\n\n  const copyOffer = new Button('Copy', () => {\n    const offer = connection.getLocalDescription();\n    if (offer) {\n      navigator.clipboard\n        .writeText(offer)\n        .then(() => {\n          console.log('copied');\n          statusElement.innerText = 'Статус: скопировано, ожидаем answer';\n        })\n        .catch(console.error);\n    }\n  }).element;\n\n  const pasteButton = new Button('Paste', () => {\n    navigator.clipboard\n      .readText()\n      .then((text) => {\n        console.log('paste');\n        connection.setRemoteDescription(text);\n      })\n      .catch(console.error);\n  }).element;\n\n  page.appendChild(statusElement);\n  page.appendChild(copyOffer);\n  page.appendChild(pasteButton);\n  page.appendChild(logContainer);\n\n  return page;\n};\n","import router from '../app/router';\nimport { getMenuModule } from '../modules';\nimport { Button } from '@/common';\n\nexport default () => {\n  const page = document.createElement('div');\n\n  const bobButton = new Button('Bob', () => {\n    router.navigate('bob');\n  }).element;\n\n  const aliceButton = new Button('Alice', () => {\n    router.navigate('alice');\n  }).element;\n\n  const backButton = new Button('Go back', () => {\n    router.navigate('');\n  }).element;\n\n  const menuButtons = [bobButton, aliceButton, backButton];\n\n  page.appendChild(getMenuModule('Choose the role', menuButtons));\n\n  return page;\n};\n"],"names":["peerConfiguration","iceServers","urls","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","constructor","tagName","attributes","arguments","length","this","_element","document","createElement","entries","setAttribute","element","subscribe","store","callback","Component","text","super","innerText","classList","add","updateText","onClick","onclick","pageId","console","log","window","addEventListener","event","_resolve","initRoutes","routes","_routes","initPageContainer","_pageContainer","id","_activeClassResolver","eventType","location","hash","updateActiveClass","navigate","url","isActive","_updatePage","innerHTML","appendChild","getHomePage","getNewPage","replace","require","connection","initConnection","response","fetch","json","peer","RTCPeerConnection","onconnectionstatechange","iceConnectionState","onicecandidateerror","initLogger","logContainer","addMessage","message","status","style","paddingBottom","color","prepend","type","onicecandidate","candidate","getLocalDescription","JSON","stringify","localDescription","onIceCandidate","setRemoteDescription","rowData","parse","createOffer","offer","setLocalDescription","createAnswer","answer","onOpen","role","ondatachannel","dataChannel","channel","onopen","createDataChannel","error","headerText","buttons","header","Header","forEach","button","getMessageElement","Date","toUTCString","split","fontSize","async","navigator","serviceWorker","register","makeServiceWorkers","rootElement","getElementById","router","page","connectButton","Button","offlineButton","disabled","menuButtons","getMenuModule","statusElement","getStatusElement","padding","then","pasteButton","clipboard","readText","catch","copyOffer","writeText","form","onsubmit","preventDefault","chatContainer","onmessage","data","input","Input","sendButton","send"],"sourceRoot":""}